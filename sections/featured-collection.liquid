<section class="section-spacing page-width">
  <div class="section-title">
    <div>
      <h2>{{ section.settings.heading }}</h2>
      <p>{{ section.settings.subtext }}</p>
    </div>
    {% if section.settings.button_label != blank %}
      <a class="button button--outline" href="{{ section.settings.button_link }}">{{ section.settings.button_label }}</a>
    {% endif %}
  </div>

  <div class="product-grid">
    {% assign collection = collections[section.settings.collection] %}
    {% if collection != blank and collection.products_count > 0 %}
      {% for product in collection.products limit: section.settings.products_to_show %}
        {% render 'card-product', product: product %}
      {% endfor %}
    {% else %}
      {% for i in (1..4) %}
        <article class="product-card">
          <div class="product-card__media">{{ 'product-' | append: i | placeholder_svg_tag: 'placeholder-svg' }}</div>
          <div class="product-card__content">
            <h3 class="product-card__title">Sample product {{ i }}</h3>
            <div class="product-card__price">$49.00</div>
          </div>
        </article>
      {% endfor %}
    {% endif %}
  </div>
</section>

{% schema %}
{
  "name": "Featured collection",
  "settings": [
    {
      "type": "text",
      "id": "heading",
      "label": "Heading",
      "default": "Best sellers"
    },
    {
      "type": "text",
      "id": "subtext",
      "label": "Subtext",
      "default": "Curated pieces inspired by the Figma layout."
    },
    {
      "type": "collection",
      "id": "collection",
      "label": "Collection"
    },
    {
      "type": "range",
      "id": "products_to_show",
      "label": "Products to show",
      "min": 2,
      "max": 12,
      "step": 1,
      "default": 4
    },
    {
      "type": "text",
      "id": "button_label",
      "label": "Button label",
      "default": "View all"
    },
    {
      "type": "url",
      "id": "button_link",
      "label": "Button link"
    }
  ],
  "presets": [
    {
      "name": "Featured collection"
    }
  ]
}
{% endschema %}
